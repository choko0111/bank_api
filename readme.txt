request_ok() создаёт функцию, но она ещё не выполняется.
confirm(response) выполняется только тогда, когда у тебя реально есть ответ от API.
Вложенность нужна, чтобы сгенерировать функцию проверки заранее, а вызвать её потом, когда будет response.